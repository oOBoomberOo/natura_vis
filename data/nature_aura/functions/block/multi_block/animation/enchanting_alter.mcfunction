scoreboard players add @s bb.animation 1
execute as @s if score @s bb.animation matches 1.. run data merge entity @s {Invulnerable:1b}

execute as @s if score @s bb.animation matches 1 run particle happy_villager ~1 ~-0.5 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 1 run particle happy_villager ~1 ~-0.5 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 1 run particle happy_villager ~-1 ~-0.5 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 1 run particle happy_villager ~-1 ~-0.5 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 3 run particle happy_villager ~1 ~-0.4 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 3 run particle happy_villager ~1 ~-0.4 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 3 run particle happy_villager ~-1 ~-0.4 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 3 run particle happy_villager ~-1 ~-0.4 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 5 run particle happy_villager ~1 ~-0.3 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 5 run particle happy_villager ~1 ~-0.3 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 5 run particle happy_villager ~-1 ~-0.3 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 5 run particle happy_villager ~-1 ~-0.3 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 7 run particle happy_villager ~1 ~-0.2 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 7 run particle happy_villager ~1 ~-0.2 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 7 run particle happy_villager ~-1 ~-0.2 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 7 run particle happy_villager ~-1 ~-0.2 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 9 run particle happy_villager ~1 ~-0.1 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 9 run particle happy_villager ~1 ~-0.1 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 9 run particle happy_villager ~-1 ~-0.1 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 9 run particle happy_villager ~-1 ~-0.1 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 11 run particle happy_villager ~1 ~-0.0 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 11 run particle happy_villager ~1 ~-0.0 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 11 run particle happy_villager ~-1 ~-0.0 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 11 run particle happy_villager ~-1 ~-0.0 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 13 run particle happy_villager ~1 ~0.1 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 13 run particle happy_villager ~1 ~0.1 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 13 run particle happy_villager ~-1 ~0.1 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 13 run particle happy_villager ~-1 ~0.1 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 15 run particle happy_villager ~1 ~0.2 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 15 run particle happy_villager ~1 ~0.2 ~-1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 15 run particle happy_villager ~-1 ~0.2 ~1 0.1 0 0.1 0.5 1 normal @a
execute as @s if score @s bb.animation matches 15 run particle happy_villager ~-1 ~0.2 ~-1 0.1 0 0.1 0.5 1 normal @a

execute as @s if score @s bb.animation matches 14 run particle minecraft:enchant 37.5 67 -7.5 0.5 0.5 0.5 1 500 normal @a
execute as @s if score @s bb.animation matches 1 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 1 0.6 0
execute as @s if score @s bb.animation matches 5 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 1 0.7 0
execute as @s if score @s bb.animation matches 9 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.9 0.8 0
execute as @s if score @s bb.animation matches 14 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.8 0.9 0
execute as @s if score @s bb.animation matches 17 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.7 1.0 0

execute as @s if score @s bb.animation matches 21 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.6 1.1 0
execute as @s if score @s bb.animation matches 25 run playsound minecraft:block.note_block.chime voice @a ~ ~ ~ 0.3 1 0
execute as @s if score @s bb.animation matches 25 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.5 1.2 0
execute as @s if score @s bb.animation matches 29 run playsound minecraft:block.note_block.chime voice @a ~ ~ ~ 0.3 0.9 0
execute as @s if score @s bb.animation matches 29 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.4 1.3 0
execute as @s if score @s bb.animation matches 34 run playsound minecraft:block.note_block.chime voice @a ~ ~ ~ 0.3 0.8 0
execute as @s if score @s bb.animation matches 34 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.4 1.4 0
execute as @s if score @s bb.animation matches 39 run playsound minecraft:block.note_block.chime voice @a ~ ~ ~ 0.3 0.7 0
execute as @s if score @s bb.animation matches 39 run playsound minecraft:block.note_block.harp voice @a ~ ~ ~ 0.5 1.5 0

execute as @s[scores={bb.animation=52..}] run scoreboard players operation #na.aura.io.sub.input bb.variable = #na.cost.enchanting_alter bb.variable
execute as @s[scores={bb.animation=52..}] run function nature_aura:aura/io/subtract
execute as @s[scores={bb.animation=52..}] run scoreboard players set @s bb.animation -1